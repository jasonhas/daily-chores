---
import '../scripts/sendMail.js'
---

<form method="POST">
    <label>Name</label>
    <input type="text" name="user_name" id="fullName"/>
    <label>Email</label>
    <input type="email" name="user_email" id="email_id"/>
    <label>Message</label>
    <textarea name="message" id="message"/>
    <input type="submit" value="Send" />
  </form>

<script type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
<script type="text/javascript">
(function(){
   emailjs.init({
     publicKey: "o3RAMOR9nlUcfudx3",
   });
})();

function SendMail() {
  alert('Send Page')
  var params = {
  from_name : document.getElementById("fullName").value,
  email_id : document.getElementById("email_id").value,
  message : document.getElementById("message").value
}
emailjs.send("service_m5xigsw", "template dcm1s5x", params).then(
      (res) => {
        console.log('SUCCESS', res.status, res.text)
      },
      (error) => {
        console.log('FAILED', error )
      }
    )
}
</script>
<script>
const buttons = document.querySelectorAll('button.email');

buttons.forEach((button) => {
  button.addEventListener('click', () => {
    alert('Email Sent!')
    SendMail();
  })
});



</script>